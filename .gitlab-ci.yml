image: ubuntu:16.04

stages:
  - infra
  - kube
  - destroy
  
before_script:
  - apt-get update
  - apt-get install -y -qq curl
  - curl https://storage.yandexcloud.net/yandexcloud-yc/install.sh | bash

Deploy Infra:
  stage: infra
  script:
    - echo "Start infrustructure deployment"
    - ~/yandex-cloud/bin/yc init --token ${YC_OAUTH_TOKEN} --cloud-id ${YC_CLOUD_ID} --folder-id ${YC_FOLDER_ID} --no-user-output
    - ~/yandex-cloud/bin/yc config list

Deploy Kubernetes:
  stage: kube
  script:
    - echo "Do your deploy here"

Destroy:
  stage: destroy
  script:
    - echo "Do your deploy here"
  when: manual